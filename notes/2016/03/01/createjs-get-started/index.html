<!DOCTYPE html><html lang="zh-cn" class="theme-o2 page-post-detail"><head prefix="og: http://ogp.me/ns#"><meta charset="utf-8"><title>createjs开发入门 | Aotu.io「凹凸实验室」</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="keywords" content="easeljs,soundjs,preloadjs,zoe,tweenjs,createjs,凹凸实验室,Aotu,前端开发,全栈开发,IOS开发,Android开发"><link rel="canonical" href="http://aotu.io/notes/2016/03/01/createjs-get-started/index.html"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="/assets/img/favicon-230x230.png" sizes="230x230"><link rel="icon" type="image/png" href="/assets/img/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/assets/img/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png" sizes="32x32"><meta name="msapplication-TileColor" content="#2f83cd"><meta name="msapplication-TileImage" content="/assets/img/mstile-144x144.png"><link rel="stylesheet" href="/assets/css/dist-c41d9f085d.o2.css"><link rel="stylesheet" href="/assets/fancybox/jquery.fancybox.css"><link rel="alternate" href="/atom.xml" title="Aotu.io「凹凸实验室」"><meta name="description" content="通过实例简单介绍createjs的使用方法"><meta property="og:type" content="article"><meta property="og:title" content="createjs开发入门"><meta property="og:url" content="http://aotu.io/notes/2016/03/01/createjs-get-started/index.html"><meta property="og:site_name" content="Aotu.io「凹凸实验室」"><meta property="og:description" content="通过实例简单介绍createjs的使用方法"><meta property="og:image" content="http://aotu.io/img/post/youing/20160229/tweenjs.gif"><meta property="og:image" content="http://aotu.io/img/post/youing/20160229/guidemotion.gif"><meta property="og:image" content="http://aotu.io/img/post/youing/20160229/grantrun.gif"><meta property="og:image" content="http://aotu.io/img/post/youing/20160229/1.pic.jpg"><meta property="og:image" content="http://aotu.io/img/post/youing/20160229/2.pic.png"><meta property="og:image" content="http://aotu.io/img/post/youing/20160229/3.pic.png"><meta property="og:image" content="http://aotu.io/img/post/youing/20160229/4.pic.png"><meta property="og:updated_time" content="2016-03-24T05:02:12.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="createjs开发入门"><meta name="twitter:description" content="通过实例简单介绍createjs的使用方法"><meta name="twitter:image" content="http://aotu.io/img/post/youing/20160229/tweenjs.gif"><meta name="twitter:site" content="o2circle"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?e850b980d029480b092fdd7503c3f8de";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>var App={root:"/"}</script><body itemscope itemtype="http://schema.org/WebPage"><div class="navbar navbar-fixed-top header" itemscope itemtype="http://schema.org/WPHeader"><div class="container"><div class="navbar-header"><a href="/index.html" title="Aotu.io「凹凸实验室」" class="navbar-brand"><img src="/assets/img/logo_186x65.png" alt="Aotu.io「凹凸实验室」"></a><div onclick="" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-main"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></div></div><div class="navbar-collapse collapse" id="navbar-main"><ul class="nav navbar-nav header-links header-links-main"><li class="main-nav-item"><a href="/index.html" class="main-nav-link">首页</a><li class="main-nav-item active"><a href="/notes/" class="main-nav-link">博客</a><li class="main-nav-item"><a href="/tags/" class="main-nav-link">标签</a><li class="main-nav-item"><a href="http://aotu.io/brand/" class="main-nav-link">品牌</a><li class="main-nav-item"><a href="/about/" class="main-nav-link">关于</a></ul><ul class="nav navbar-nav navbar-right header-links header-links-extra"><li class="search-wrap"><a class="fa fa-search search-icon" href="#search" title="搜索"></a><form id="search" method="get" class="search-form"><input type="text" name="query" class="search-form-ipt" placeholder="搜索"></form><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;" id="themes" aria-expanded="false">主题&nbsp;<span class="caret"></span></a><ul id="theme-list" class="dropdown-menu" aria-labelledby="themes"><li data-v="light"><a href="javascript:;">曙光女神</a><li data-v="dark"><a href="javascript:;">暗影猎手</a></ul></ul></div></div></div><div class="container post-wrap"><article class="post" itemscope itemtype="http://schema.org/Article"><header class="post-header"><div class="post-title"><h2><a href="/notes/2016/03/01/createjs-get-started/" itemprop="name">createjs开发入门</a></h2><ul class="post-stats"><li><a href="/tags/createjs/" class="meta-tag">createjs</a><li><a href="/tags/tweenjs/" class="meta-tag">tweenjs</a><li><a href="/tags/zoe/" class="meta-tag">zoe</a><li><a href="/tags/preloadjs/" class="meta-tag">preloadjs</a><li><a href="/tags/soundjs/" class="meta-tag">soundjs</a><li><a href="/tags/easeljs/" class="meta-tag">easeljs</a><li title="字数"><span class="icon fa-font">5,146</span><li id="busuanzi_container_page_pv" title="热度"><span class="icon fa-eye" id="busuanzi_value_page_pv"></span><li><a href="/notes/2016/03/01/createjs-get-started/#comments" itemprop="discussionUrl" class="lnk-comments"><span class="post-comments-count ds-thread-count icon fa-comments" data-thread-key="bm90ZXMvMjAxNi8wMy8wMS9jcmVhdGVqcy1nZXQtc3RhcnRlZC8=" data-count-type="comments" itemprop="commentsCount">0</span></a></ul><p>通过实例浅析createjs</div><div class="post-meta"><time class="published" datetime="2016-02-29T20:10:15.000Z" itempro="datePublished">星期一, 2月29日 2016</time> <a target="_blank" href="https://github.com/youing" class="author"><span class="name">圆姑娘她爹</span><img src="https://avatars.githubusercontent.com/youing?v=3&s=80" alt="youing"></a></div></header><a href="/notes/2016/03/01/createjs-get-started/" class="image featured post-cover"><img src="/assets/img/post/youing/20160229/createjs-get-started-cover.jpg" alt="createjs开发入门"></a><div class="post-content" itemprop="articleBody" data-swiftype-index="true"><p>通过实例简单介绍createjs的使用方法<br><a id="more"></a><h2 id="PRELOADJS" class="post-heading"><a href="#PRELOADJS" class="headerlink" title="PRELOADJS"></a>PRELOADJS<a class="post-anchor" href="#PRELOADJS" aria-hidden="true"></a></h2><p>PreloadJS是一个用来管理和协调相关资源加载的类库，它可以方便的帮助你预先加载相关资源。<h3 id="LoadQueue类介绍" class="post-heading"><a href="#LoadQueue类介绍" class="headerlink" title="LoadQueue类介绍"></a>LoadQueue类介绍<a class="post-anchor" href="#LoadQueue类介绍" aria-hidden="true"></a></h3><p>LoadQueue是一个加载管理器，可以预先加载一个文件或者一个文件队列。<p>LoadQueue包含了几个可以订阅的事件：<ul><li>complete: 当队列完成全部加载后触发<li>error: 当队列遇到错误时触发<li>progress: 整个队列变化时展示的进度<li>fileload: 一个单独文件加载完毕<li>fileprogress: 一个单独文件变化的进度，请注意只有文件使用XHR加载才会触发，其它只会显示0或者100%</ul><p>LoadQueue支持相关文件类型如下：<ul><li>BINARY: XHR调用的二进制文件<li>CSS: CSS文件<li>IMAGE: 一般图片文件格式<li>JAVASCRIPT: JavaScript文件<li>JSON: JSON数据<li>JSONP: 跨域JSON文件<li>MANIFEST: JSON格式的文件列表<li>SOUND: 音频文件<li>SVG: SVG文件<li>TEXT: 文本文件 - 仅支持XHR<li>XML: XML数据</ul><h3 id="示例：" class="post-heading"><a href="#示例：" class="headerlink" title="示例："></a>示例：<a class="post-anchor" href="#示例：" aria-hidden="true"></a></h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre><td class="code"><pre><span class="line">manifest = [</span><br><span class="line">	&#123;<span class="string">src:</span> <span class="string">"art/sky.png"</span>, <span class="string">id:</span> <span class="string">"sky"</span>&#125;,</span><br><span class="line">	&#123;<span class="string">src:</span> <span class="string">"art/ground.png"</span>, <span class="string">id:</span> <span class="string">"ground"</span>&#125;,</span><br><span class="line">	&#123;<span class="string">src:</span> <span class="string">"art/hill2.png"</span>, <span class="string">id:</span> <span class="string">"hill2"</span>&#125;,</span><br><span class="line">	&#123;<span class="string">src:</span> <span class="string">"art/hill1.png"</span>, <span class="string">id:</span> <span class="string">"hill"</span>&#125;,</span><br><span class="line">	&#123;<span class="string">src:</span> <span class="string">"static/grant.json"</span>, <span class="string">id:</span><span class="string">"grant"</span>, <span class="string">type:</span><span class="string">"spritesheet"</span>&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">var loader = <span class="keyword">new</span> createjs.LoadQueue(<span class="literal">true</span>, <span class="string">"../_assets/"</span>);</span><br><span class="line">loader.on(<span class="string">"fileload"</span>, handleFileLoad);</span><br><span class="line">loader.on(<span class="string">"complete"</span>, handleComplete);</span><br><span class="line">loader.loadManifest(manifest);</span><br></pre></table></figure><ul><li>预加载音频文件</ul><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre><td class="code"><pre><span class="line"><span class="comment">//初始化插件</span></span><br><span class="line">preload.installPlugin(createjs.Sound)<span class="comment">;</span></span><br></pre></table></figure><ul><li>设置加载路径</ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line"><span class="attr">preload</span> = new createjs.LoadQueue(<span class="literal">true</span>, <span class="string">"../_assets/art/"</span>);</span><br></pre></table></figure><ul><li>获取预加载资源</ul><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line">preload.getResult(‘<span class="built_in">id</span>’);</span><br></pre></table></figure><p>通常进度条可以通过<code>fileload</code>和<code>complete</code>来实现。<h2 id="SOUNDJS" class="post-heading"><a href="#SOUNDJS" class="headerlink" title="SOUNDJS"></a>SOUNDJS<a class="post-anchor" href="#SOUNDJS" aria-hidden="true"></a></h2><p>一个音频播放引擎，能够根据浏览器性能选择音频播放方式。将音频文件作为模块，可随时加载和卸载。<h3 id="单个音频基本用法" class="post-heading"><a href="#单个音频基本用法" class="headerlink" title="单个音频基本用法"></a>单个音频基本用法<a class="post-anchor" href="#单个音频基本用法" aria-hidden="true"></a></h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre><td class="code"><pre><span class="line"><span class="keyword">var</span> assetsPath = <span class="string">"../_assets/audio/"</span>;</span><br><span class="line">src = assetsPath + <span class="string">"M-GameBG.ogg"</span>;</span><br><span class="line"></span><br><span class="line">createjs.Sound.alternateExtensions = [<span class="string">"mp3"</span>];	<span class="comment">// 源格式不支持时，用此格式替换</span></span><br><span class="line">createjs.Sound.addEventListener(<span class="string">"fileload"</span>, playSound); <span class="comment">// 加载完回调</span></span><br><span class="line">createjs.Sound.registerSound(src);  <span class="comment">// 注册</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">playSound</span><span class="params">(event)</span> </span>&#123;</span><br><span class="line">	soundInstance = createjs.Sound.play(event.src);  <span class="comment">// 播放实例</span></span><br><span class="line">&#125;</span><br></pre></table></figure><h3 id="多个音频用法" class="post-heading"><a href="#多个音频用法" class="headerlink" title="多个音频用法"></a>多个音频用法<a class="post-anchor" href="#多个音频用法" aria-hidden="true"></a></h3><p><code>registerSounds</code><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre><td class="code"><pre><span class="line"><span class="built_in">var</span> assetsPath = <span class="string">"../_assets/audio/"</span>;</span><br><span class="line"><span class="built_in">var</span> sounds = [</span><br><span class="line">	&#123;<span class="attribute">src</span>: <span class="string">"Game-Break.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 1&#125;,</span><br><span class="line">	&#123;src</span>: <span class="string">"Game-Spawn.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 2&#125;,</span><br><span class="line">	&#123;src</span>: <span class="string">"Game-Shot.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 3&#125;,</span><br><span class="line"></span><br><span class="line">	&#123;src</span>: <span class="string">"GU-StealDaisy.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 4&#125;,</span><br><span class="line">	&#123;src</span>: <span class="string">"Humm.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 5&#125;,</span><br><span class="line">	&#123;src</span>: <span class="string">"R-Damage.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 6&#125;,</span><br><span class="line"></span><br><span class="line">	&#123;src</span>: <span class="string">"Thunder1.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 7&#125;,</span><br><span class="line">	&#123;src</span>: <span class="string">"S-Damage.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 8&#125;,</span><br><span class="line">	&#123;src</span>: <span class="string">"U-CabinBoy3.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 9&#125;,</span><br><span class="line"></span><br><span class="line">	&#123;src</span>: <span class="string">"ToneWobble.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 10&#125;,</span><br><span class="line">	&#123;src</span>: <span class="string">"Game-Death.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 11&#125;,</span><br><span class="line">	&#123;src</span>: <span class="string">"Game-Break.ogg"</span>, <span class="attribute">id:</span><span class="emphasis"> 12&#125; </span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">createjs.Sound.alternateExtensions</span> = [<span class="string">"mp3"</span>];</span><br><span class="line">createjs.Sound.addEventListener(<span class="string">"fileload"</span>, createjs.proxy(soundLoaded, <span class="keyword">this</span>)); </span><br><span class="line">createjs.Sound.registerSounds(sounds, assetsPath);</span><br></pre></table></figure><h3 id="声音合成" class="post-heading"><a href="#声音合成" class="headerlink" title="声音合成"></a>声音合成<a class="post-anchor" href="#声音合成" aria-hidden="true"></a></h3><ul><li>AudioSprite例子</ul><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre><td class="code"><pre><span class="line">createjs.Sound.initializeDefaultPlugins();</span><br><span class="line">var assetsPath = <span class="string">"./assets/"</span>;</span><br><span class="line">var sounds = [&#123;</span><br><span class="line"><span class="symbol">    src:</span><span class="string">"MyAudioSprite.ogg"</span>, <span class="string">data:</span> &#123;</span><br><span class="line"><span class="symbol">        audioSprite:</span> [</span><br><span class="line">            &#123;<span class="string">id:</span><span class="string">"sound1"</span>, <span class="string">startTime:</span><span class="number">0</span>, <span class="string">duration:</span><span class="number">500</span>&#125;,</span><br><span class="line">            &#123;<span class="string">id:</span><span class="string">"sound2"</span>, <span class="string">startTime:</span><span class="number">1000</span>, <span class="string">duration:</span><span class="number">400</span>&#125;,</span><br><span class="line">            &#123;<span class="string">id:</span><span class="string">"sound3"</span>, <span class="string">startTime:</span><span class="number">1700</span>, <span class="string">duration:</span> <span class="number">1000</span>&#125;</span><br><span class="line">        ]&#125;</span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line">createjs.Sound.alternateExtensions = [<span class="string">"mp3"</span>];</span><br><span class="line">createjs.Sound.on(<span class="string">"fileload"</span>, loadSound);</span><br><span class="line">createjs.Sound.registerSounds(sounds, assetsPath);</span><br><span class="line"><span class="comment">// after load is complete</span></span><br><span class="line">createjs.Sound.play(<span class="string">"sound2"</span>);</span><br></pre></table></figure><ul><li>AudioSprite安装</ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g audiosprite</span><br></pre></table></figure><ul><li>homebrew安装ffmpeg</ul><p>FFmpeg and the ogg codecs on OSX using brew:<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line">brew install ffmpeg --<span class="keyword">with</span>-theora --<span class="keyword">with</span>-libogg --<span class="keyword">with</span>-libvorbis</span><br></pre></table></figure><ul><li>生成音频文件</ul><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line"><span class="symbol">audiosprite</span> --autoplay <span class="keyword">bg_loop </span>--output mygameaudio <span class="keyword">bg_loop.wav </span>*.mp3</span><br></pre></table></figure><p>可选参数可以设置是否自动播放等，具体请参考<a href="https://github.com/tonistiigi/audiosprite" target="_blank" rel="external">这里</a><ul><li>在线导出</ul><p>把生成好的json文件，导入到以下链接，才能供soundjs使用<p><a href="http://jsfiddle.net/bharat_battu/g8fFP/12/" target="_blank" rel="external">http://jsfiddle.net/bharat_battu/g8fFP/12/</a><h2 id="TWEENJS" class="post-heading"><a href="#TWEENJS" class="headerlink" title="TWEENJS"></a>TWEENJS<a class="post-anchor" href="#TWEENJS" aria-hidden="true"></a></h2><p>TweenJS类库主要用来调整和动画HTML5和Javascript属性。提供了简单并且强大的tweening接口。支持数字对象属性和CSS样式属性，允许你使用链式语法来生成复杂的过程<h3 id="示例" class="post-heading"><a href="#示例" class="headerlink" title="示例"></a>示例<a class="post-anchor" href="#示例" aria-hidden="true"></a></h3><p class="user_img"><img src="/assets/img/post/youing/20160229/tweenjs.gif"><h3 id="使用方法" class="post-heading"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法<a class="post-anchor" href="#使用方法" aria-hidden="true"></a></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre><td class="code"><pre><span class="line"><span class="selector-tag">createjs</span><span class="selector-class">.Tween</span><span class="selector-class">.get</span>(<span class="selector-tag">target</span>)</span><br><span class="line">    <span class="selector-class">.to</span>(&#123;<span class="attribute">x</span>:<span class="number">300</span>&#125;,400,<span class="selector-tag">createjs</span><span class="selector-class">.Ease</span><span class="selector-class">.bounceInOut</span>)</span><br><span class="line">    <span class="selector-class">.set</span>(&#123;<span class="attribute">label</span>:<span class="string">"hello!"</span>&#125;)</span><br><span class="line">    <span class="selector-class">.wait</span>(500)</span><br><span class="line">    <span class="selector-class">.to</span>(&#123;<span class="attribute">alpha</span>:<span class="number">0</span>,visible:false&#125;,1000)</span><br><span class="line">    <span class="selector-class">.call</span>(<span class="selector-tag">onComplete</span>);</span><br></pre></table></figure><ul><li><code>get</code> 获取目标元素<li><code>to</code> 执行动画<li><code>set</code> 设置属性<li><code>wait</code> 队列等待<li><code>call</code> 执行回调函数<li><code>createjs.Ease.bounceInOut</code> 缓动效果</ul><h3 id="引导动画" class="post-heading"><a href="#引导动画" class="headerlink" title="引导动画"></a>引导动画<a class="post-anchor" href="#引导动画" aria-hidden="true"></a></h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre><td class="code"><pre><span class="line">createjs.MotionGuidePlugin.install(createjs.Tween)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">createjs.Tween.get(target).to(&#123;guide:&#123; path:[<span class="number">0</span>,<span class="number">0</span>, <span class="number">0,200,200,200</span>, <span class="number">200,0,0,0</span>] &#125;&#125;,<span class="number">7000</span>)<span class="comment">;</span></span><br><span class="line">//path所设置的坐标等同于下面画曲线的坐标</span><br><span class="line">graphics.moveTo(<span class="number">0</span>,<span class="number">0</span>).curveTo(<span class="number">0,200,200,200</span>).curveTo(<span class="number">200,0,0,0</span>)<span class="comment">;</span></span><br></pre></table></figure><ul><li>例子</ul><p class="user_img"><img src="/assets/img/post/youing/20160229/guidemotion.gif"><h2 id="EASELJS" class="post-heading"><a href="#EASELJS" class="headerlink" title="EASELJS"></a>EASELJS<a class="post-anchor" href="#EASELJS" aria-hidden="true"></a></h2><p>EaselJS 是一个用以与 HTML5 canvas 协作的库。它包含一个完整的分层展示列表、一个核心交互模型以及一些辅助类，通过其来使与 Canvas 的协作更简单。<h3 id="先看例子" class="post-heading"><a href="#先看例子" class="headerlink" title="先看例子"></a>先看例子<a class="post-anchor" href="#先看例子" aria-hidden="true"></a></h3><p class="user_img"><img src="/assets/img/post/youing/20160229/grantrun.gif"><p>下面介绍这个例子的制作过程<h3 id="素材准备" class="post-heading"><a href="#素材准备" class="headerlink" title="素材准备"></a>素材准备<a class="post-anchor" href="#素材准备" aria-hidden="true"></a></h3><p class="user_img"><img src="/assets/img/post/youing/20160229/1.pic.jpg"><p>人物精灵图会用到<strong>flash</strong>+<strong>zoe</strong>来生成<p>打开flash，新建一个新的as3项目，导入图片，只要文件名是有序的，会自动导入到每一帧，如下图<p class="user_img"><img src="/assets/img/post/youing/20160229/2.pic.png"><p class="user_img"><img src="/assets/img/post/youing/20160229/3.pic.png"><p>导入完之后，新建一个图层，来放动作标签，如上面的<code>run</code>和<code>jump</code><p>最后再新建一个新的图层用来放动作脚本，这里只需要写<code>stop()</code>就可以了，这样整个动画是处于静止状态。<p>然后用快捷键<code>Ctrl + enter</code>发布成swf格式，并把它导入到<strong>zoe</strong>工具,效果如下<p class="user_img"><img src="/assets/img/post/youing/20160229/4.pic.png"><p>tab选项卡切换到<code>Animations</code> 可以预览和设置刚才在flash设置的动作。<p>最后导出json代码供后续使用<h3 id="开发阶段" class="post-heading"><a href="#开发阶段" class="headerlink" title="开发阶段"></a>开发阶段<a class="post-anchor" href="#开发阶段" aria-hidden="true"></a></h3><p>createjs中，元素都是放到舞台中<ol><li>舞台创建</ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre><td class="code"><pre><span class="line">&lt;canvas id=<span class="string">"testCanvas"</span> width=<span class="string">"960"</span> height=<span class="string">"400"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stage = <span class="keyword">new</span> createjs.Stage(<span class="string">"testCanvas"</span>);</span><br></pre></table></figure><ol><li>天空</ol><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre><td class="code"><pre><span class="line">sky = <span class="keyword">new</span> createjs.Shape()<span class="comment">;</span></span><br><span class="line">sky.graphics.beginBitmapFill(loader.getResult(<span class="string">"sky"</span>)).drawRect(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">w</span>, <span class="keyword">h</span>)<span class="comment">;</span></span><br></pre></table></figure><p><code>Shape</code>类，通常用于画图，例如画矩形，圆形时会使用到<ol><li>地板</ol><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre><td class="code"><pre><span class="line">var groundImg = loader.getResult(<span class="string">"ground"</span>)<span class="comment">;</span></span><br><span class="line">ground = new createjs.Shape()<span class="comment">;</span></span><br><span class="line">ground.graphics.beginBitmapFill(groundImg).drawRect(<span class="number">0</span>, <span class="number">0</span>, w + groundImg.<span class="keyword">width</span>, groundImg.height)<span class="comment">;</span></span><br><span class="line">ground.tileW = groundImg.<span class="keyword">width</span><span class="comment">;</span></span><br><span class="line">ground.y = h - groundImg.height<span class="comment">;</span></span><br></pre></table></figure><ol><li>山</ol><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre><td class="code"><pre><span class="line">hill = <span class="keyword">new</span> createjs.Bitmap(loader.getResult(<span class="string">"hill"</span>));</span><br><span class="line">hill.setTransform(Math.<span class="built_in">random</span>() * w, h - hill.<span class="built_in">image</span>.<span class="built_in">height</span> * <span class="number">4</span> - groundImg.<span class="built_in">height</span>, <span class="number">4</span>, <span class="number">4</span>);</span><br><span class="line">hill.<span class="built_in">alpha</span> = <span class="number">0.5</span>;</span><br></pre></table></figure><p><code>Bitmap</code>类，常用于位图处理<ol><li>人物</ol><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre><td class="code"><pre><span class="line"><span class="built_in">var</span> spriteSheet = <span class="keyword">new</span> createjs.SpriteSheet(</span><br><span class="line">&#123;</span><br><span class="line">	<span class="attribute">framerate</span>: <span class="number">30</span>,</span><br><span class="line">	<span class="string">"images"</span>: [loader.getResult(<span class="string">"grant"</span>)],</span><br><span class="line">	<span class="string">"frames"</span>: &#123;<span class="string">"regX"</span>: <span class="number">82</span>, <span class="string">"height"</span>: <span class="number">292</span>, <span class="string">"count"</span>: <span class="number">64</span>, <span class="string">"regY"</span>: <span class="number">0</span>, <span class="string">"width"</span>: <span class="number">165</span>&#125;,</span><br><span class="line">	<span class="string">"animations"</span>: &#123;</span><br><span class="line">		<span class="string">"run"</span>: [<span class="number">0</span>, <span class="number">25</span>, <span class="string">"run"</span>, <span class="number">1.5</span>],</span><br><span class="line">		<span class="string">"jump"</span>: [<span class="number">26</span>, <span class="number">63</span>, <span class="string">"run"</span>]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">var</span> grant = <span class="keyword">new</span> createjs.Sprite(spriteSheet, <span class="string">"run"</span>);</span><br></pre></table></figure><p>人物用到<code>Sprite</code>类，精灵图存放在<code>SpriteSheet</code>中，刚才用<strong>flash</strong> + <strong>zoe</strong> 生成的json，可以直接传入到<code>SpriteSheet</code>初始化对象中。<p>还可以直接使用代码<code>gotoAndPlay(&#39;run&#39;)</code>来进行动作间的切换。<ol><li>元素加入舞台</ol><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line">stage.<span class="keyword">addChild(sky, </span>hill, hill2, ground, grant)<span class="comment">;</span></span><br></pre></table></figure><ol><li>让物体动起来</ol><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre><td class="code"><pre><span class="line">createjs.Ticker.setFPS(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">createjs.Ticker.addEventListener(<span class="string">"tick"</span>, handleTick);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleTick</span><span class="params">(event)</span> </span>&#123;</span><br><span class="line"><span class="comment">//物品移动逻辑</span></span><br><span class="line">    stage.update();</span><br><span class="line">&#125;</span><br></pre></table></figure><h2 id="知识点" class="post-heading"><a href="#知识点" class="headerlink" title="知识点"></a>知识点<a class="post-anchor" href="#知识点" aria-hidden="true"></a></h2><h3 id="开启鼠标检测" class="post-heading"><a href="#开启鼠标检测" class="headerlink" title="开启鼠标检测"></a>开启鼠标检测<a class="post-anchor" href="#开启鼠标检测" aria-hidden="true"></a></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line"><span class="selector-tag">stage</span><span class="selector-class">.enableMouseOver</span>(20);</span><br></pre></table></figure><h3 id="开启触摸" class="post-heading"><a href="#开启触摸" class="headerlink" title="开启触摸"></a>开启触摸<a class="post-anchor" href="#开启触摸" aria-hidden="true"></a></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line"><span class="selector-tag">createjs</span><span class="selector-class">.Touch</span><span class="selector-class">.enable</span>(<span class="selector-tag">this</span><span class="selector-class">.stage</span>)</span><br></pre></table></figure><h3 id="Request-Animation-Frame" class="post-heading"><a href="#Request-Animation-Frame" class="headerlink" title="Request Animation Frame"></a>Request Animation Frame<a class="post-anchor" href="#Request-Animation-Frame" aria-hidden="true"></a></h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line">createjs.Ticker.timingMode = createjs.Ticker.RAF<span class="comment">;</span></span><br></pre></table></figure><h3 id="缓存" class="post-heading"><a href="#缓存" class="headerlink" title="缓存"></a>缓存<a class="post-anchor" href="#缓存" aria-hidden="true"></a></h3><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line"><span class="built_in">shape</span>.cache(x,y,<span class="built_in">width</span>,<span class="built_in">height</span>)</span><br></pre></table></figure><h3 id="Mask" class="post-heading"><a href="#Mask" class="headerlink" title="Mask"></a>Mask<a class="post-anchor" href="#Mask" aria-hidden="true"></a></h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line"><span class="keyword">bmp.mask </span>= star<span class="comment">;</span></span><br></pre></table></figure><h3 id="碰撞检测" class="post-heading"><a href="#碰撞检测" class="headerlink" title="碰撞检测"></a>碰撞检测<a class="post-anchor" href="#碰撞检测" aria-hidden="true"></a></h3><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line">myShape.hitTest(<span class="keyword">x</span>,y)</span><br></pre></table></figure><h2 id="参考" class="post-heading"><a href="#参考" class="headerlink" title="参考"></a>参考<a class="post-anchor" href="#参考" aria-hidden="true"></a></h2><ol><li><a href="http://createjs.com/" target="_blank" rel="external">http://createjs.com/</a><li><a href="https://github.com/CreateJS" target="_blank" rel="external">https://github.com/CreateJS</a><li><a href="https://github.com/tonistiigi/audiosprite" target="_blank" rel="external">https://github.com/tonistiigi/audiosprite</a></ol></div><div class="post-revision"><i class="fa fa-clock-o"></i> <time class="post-updated" datetime="2016-03-24T05:02:12.000Z" itemprop="dateModified">上次更新：星期四, 3月24日 2016 05:02:12</time></div><div class="actions pagination pagination-post"><div class="pagination-post-prev"><a href="/notes/2016/03/04/can-we-use-base64-in-h5-webapps/" class="button big" title="图片资源Base64化在H5页面里有用武之地吗？"><i class="fa fa-chevron-left"></i> 图片资源Base64化在H5页面里有用武之地吗？</a></div><div class="pagination-post-next"><a href="/notes/2016/02/27/docker/" class="button big" title="初探Docker">初探Docker <i class="fa fa-chevron-right"></i></a></div></div><div class="post-comments" id="comments"><div class="ds-thread" data-thread-key="bm90ZXMvMjAxNi8wMy8wMS9jcmVhdGVqcy1nZXQtc3RhcnRlZC8=" data-title="createjs开发入门" data-url="http://aotu.io/notes/2016/03/01/createjs-get-started/index.html"></div><script>var duoshuoQuery={short_name:"aotu"};!function(){var t=document.createElement("script");t.id="duoshuo-script",t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()</script></div></article></div><div class="sec sec-follow-lite"><div class="container"><div class="sec-heading"><p class="follow-pic"><img src="/assets/img/qrcode.png" alt="关注我们"><p class="follow-desc">海海人生，无折腾不为乐。<p class="sec-heading-sub follow-acount"><img class="follow-icon" src="/assets/img/logo-circle-120.png" alt="AOTULabs"> 微信号：AOTULabs</div></div></div><div class="sec sec-footer"><div class="container"><footer id="footer" class="sec-heading footer"><ul class="icons"><li><a href="https://twitter.com/o2circle" class="footer-link" target="_blank"><i class="fa fa-twitter"></i></a><li><a href="/atom.xml" class="footer-link fa-rss"><span class="label">RSS</span></a><li><a href="https://github.com/o2team/o2team.github.io" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a></ul><div class="footer-sec copyright">&copy; 2016 <a href="http://aotu.io" target="_blank">凹凸实验室</a><br>Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.</div><div class="footer-sec words">" It is good to learn at another man’s cost. "</div><div class="footer-sec site-stats" style="display:none"><span id="busuanzi_container_site_pv" class="site-pv">总访问量: <span id="busuanzi_value_site_pv" class="site-pv-num"></span> 次 </span><span id="busuanzi_container_site_uv" class="site-uv">总访客数: <span id="busuanzi_value_site_uv" class="site-uv-num"></span> 人</span></div></footer></div></div><section id="smSearch" class="slide-search"><section><form class="search" method="get"><input type="text" name="query" placeholder="搜索"></form></section><section><h3>搜索结果</h3><ul class="links" id="searchResults">Loading...</ul></section></section><script id="tplSearch" type="text/hogan-tpl">{{#items}}
    <li>
        <a href="{{ url }}" target="_blank">
            <h3>{{ title }}</h3>
            {{#desc}}
			<p>{{ desc }}</p>
			{{/desc}}
        </a>
    </li>
    {{/items}}</script><div class="back-to-top" id="backTop"><i class="fa fa-long-arrow-up"></i></div><script src="/assets/js/dist-2a84b65682.o2.js"></script><script src="/assets/js/dist-bb2f97f6a9.duoshuo.js"></script><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>!function(){var e=document.createElement("script");e.src="//push.zhanzhang.baidu.com/push.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>